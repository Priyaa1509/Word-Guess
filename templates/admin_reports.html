{% extends "base.html" %}

{% block content %}
    <div class="container admin-reports-container">
        <h2>Admin Reports</h2>

        <div class="report-section">
            <h3>Daily Report</h3>
            <form action="{{ url_for('daily_report') }}" method="GET" class="report-form">
                <label for="report-date">Select Date:</label>
                <input type="date" id="report-date" name="date" value="{{ now().strftime('%Y-%m-%d') }}" required>
                <button type="submit" class="button primary">View Daily Report</button>
            </form>
        </div>

        <div class="report-section">
            <h3>User-Specific Report</h3>
            {% if users %}
                <label for="user-select">Select User:</label>
                <select id="user-select" name="user_id">
                    <option value="">-- Select a User --</option>
                    {% for user in users %}
                        <option value="{{ user.id }}">{{ user.username }}</option>
                    {% endfor %}
                </select>
            {% else %}
                <p>No users found.</p>
            {% endif %}
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const userSelect = document.getElementById('user-select');
        userSelect.addEventListener('change', function() {
            const userId = this.value;
            if (userId) {
                const url = '/admin/reports/user/' + userId;
                window.location.href = url;
            }
        });
    });
</script>
{% endblock %}